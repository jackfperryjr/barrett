(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{16:function(e,t,a){"use strict";(function(e){function n(e){var t=JSON.parse(localStorage.refreshToken);fetch("https://chocobo.moogleapi.com/v1/account/refresh",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("accessToken",JSON.stringify(e.accessToken)),localStorage.setItem("refreshToken",JSON.stringify(e.refreshToken))}))}a.d(t,"a",(function(){return n}))}).call(this,a(40).Buffer)},28:function(e,t,a){e.exports=a(47)},33:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(13),c=a.n(o),r=a(5),s=(a(33),a(4)),i=a(15),m=Object(n.createContext)();function u(){return Object(n.useContext)(m)}var p=a(27);var d=function(e){var t=e.component,a=Object(p.a)(e,["component"]),n=u().authToken;return l.a.createElement(i.b,Object.assign({},a,{render:function(e){return n?l.a.createElement(t,e):l.a.createElement(i.a,{to:"/login"})}}))};var f=function(e){var t=Object(i.f)(),a=null;return localStorage.user&&localStorage.accessToken&&(a=JSON.parse(localStorage.user)),l.a.createElement("nav",{className:"navbar navbar-expand navbar-light"},a?l.a.createElement("span",null,l.a.createElement(r.c,{to:"/",className:"font-lobster"},"blog"),l.a.createElement(r.c,{to:"/add"},l.a.createElement("div",{className:"pen-blog"},l.a.createElement("i",{className:"fas fa-pen-alt"}))),l.a.createElement("img",{onClick:function(){localStorage.clear(),t.push("/")},className:"img-navbar pointer",src:"https://rikku.blob.core.windows.net/portrait/4c8f9ed7-6187-48b0-a580-7ca770beb0f3.png",alt:"Jack"})):l.a.createElement("span",null,l.a.createElement(r.c,{to:"/",className:"font-lobster"},"blog"),l.a.createElement(r.c,{to:"/login"},l.a.createElement("img",{className:"img-navbar",src:"https://rikku.blob.core.windows.net/portrait/4c8f9ed7-6187-48b0-a580-7ca770beb0f3.png",alt:"Jack"}))))};var g=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(""),m=Object(s.a)(r,2),p=m[0],d=m[1],g=Object(n.useState)(""),E=Object(s.a)(g,2),b=E[0],v=E[1],h=Object(n.useState)(!1),N=Object(s.a)(h,2),w=N[0],y=N[1],k=u().setAuthToken,O=Object(i.f)();function j(e){if(e.preventDefault(),document.getElementById("login-error").style.display="none",document.getElementById("validation-error").style.display="none",p.length>0&&b.length>0||(document.getElementById("validation-error").style.display="block",0)){y(!0);var t={username:p,password:b,audience:"moogleAPI"};fetch("https://chocobo.moogleapi.com/v1/account/login",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.accessToken?(k(e.accessToken),c(!0),localStorage.setItem("refreshToken",JSON.stringify(e.refreshToken)),localStorage.setItem("user",JSON.stringify(e.user))):(console.log(e.message),document.getElementById("login-error").style.display="block",y(!1))}))}else console.log("validation failed")}return o&&O.push("/"),l.a.createElement(l.a.Fragment,null,l.a.createElement(f,null),l.a.createElement("div",{className:"form-container login-screen"},l.a.createElement("div",{className:"overlay",style:{display:w?"block":"none"}},l.a.createElement("span",{className:"loader text-primary"},"Let me check Stack Overflow ",l.a.createElement("i",{className:"fab fa-stack-overflow"})," ...")),l.a.createElement("p",{className:"text-center"},"Enter credentials"),l.a.createElement("form",{style:{maxWidth:"300px"}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control login-username",placeholder:"enter username",value:p,onChange:function(e){d(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"password",className:"form-control",placeholder:"enter password",value:b,onChange:function(e){v(e.target.value)}})),l.a.createElement("div",{id:"login-error"},"invalid credentials"),l.a.createElement("div",{id:"validation-error"},"enter your credentials"),l.a.createElement("p",{className:"btn btn-primary pointer",onClick:function(e){return j(e)}},"Login"))))},E=a(9),b=a.n(E),v=a(14),h=a(17),N=a.n(h);var w=function(){return l.a.createElement("footer",null,l.a.createElement("div",{className:"d-flex justify-content-center text-muted"},l.a.createElement("span",null,"\xa9 2021 jackfperryjr@moogleapi")))};var y=function(e){var t=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),l=a[0],o=a[1];function c(){return r.apply(this,arguments)}function r(){return(r=Object(v.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,o(n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){c()}),[e]),[l,c]}("https://www.moogleapi.com/api/v1/blogs"),a=Object(s.a)(t,2),o=a[0],c=a[1];function i(e,t,a){return m.apply(this,arguments)}function m(){return(m=Object(v.a)(b.a.mark((function e(t,a,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),fetch("https://www.moogleapi.com/api/v1/blogs/"+a+"/"+n,{method:"put"}).then((function(e){200===e.status&&c("https://www.moogleapi.com/api/v1/blogs")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o?l.a.createElement(l.a.Fragment,null,l.a.createElement(f,null),l.a.createElement("div",{className:"component"},l.a.createElement("div",{className:"top-margin"},o.message?l.a.createElement("span",{className:"loader text-primary"},"No blogs in the database."):l.a.createElement(l.a.Fragment,null,o.map((function(e){return l.a.createElement("div",{className:"row row-blog",key:e.id},l.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},l.a.createElement(r.c,{to:"post/"+e.id},e.title),l.a.createElement("p",{className:"blog-timestamp text-muted"},N()(e.created).local().format("MMMM D, YYYY [at] h:mm a")),l.a.createElement("div",{className:"row text-muted flex-none"},l.a.createElement("span",{className:"pointer blog-reaction float-right",onClick:function(t){i(t,"love",e.id)}},l.a.createElement("i",{className:"far fa-heart"}),l.a.createElement("span",{className:"small blogs-reaction-count"},e.love>1e3?"1000s":e.love)),l.a.createElement("span",{className:"pointer blog-reaction float-right",onClick:function(t){i(t,"dislike",e.id)}},l.a.createElement("i",{className:"far fa-thumbs-down"}),l.a.createElement("span",{className:"small blogs-reaction-count"},e.dislike)),l.a.createElement("span",{className:"pointer blog-reaction float-right",onClick:function(t){i(t,"like",e.id)}},l.a.createElement("i",{className:"far fa-thumbs-up"}),l.a.createElement("span",{className:"small blogs-reaction-count"},e.like)),localStorage.getItem("accessToken")?l.a.createElement(r.c,{to:"post/edit/"+e.id,className:"pointer blog-reaction",style:{marginLeft:"6px"}},l.a.createElement("i",{className:"fas fa-edit"})):l.a.createElement("span",null))))}))))),l.a.createElement(w,null)):l.a.createElement(l.a.Fragment,null,l.a.createElement(f,null),l.a.createElement("div",{className:"component"},l.a.createElement("span",{className:"loader text-primary"},"Watching a movie...")),l.a.createElement(w,null))};var k=function(e){var t=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),l=a[0],o=a[1];function c(){return r.apply(this,arguments)}function r(){return(r=Object(v.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,o(n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){c()}),[e]),[l,c]}("https://www.moogleapi.com/api/v1/blogs/"+Object(i.g)().id),a=Object(s.a)(t,2),o=a[0],c=a[1];function r(e,t,a){return m.apply(this,arguments)}function m(){return(m=Object(v.a)(b.a.mark((function e(t,a,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),fetch("https://www.moogleapi.com/api/v1/blogs/"+a+"/"+n,{method:"put"}).then((function(e){200===e.status&&c("https://www.moogleapi.com/api/v1/blogs"+a+"/"+n)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o?l.a.createElement(l.a.Fragment,null,l.a.createElement(f,null),l.a.createElement("div",{className:"component"},l.a.createElement("div",{className:"top-margin"},l.a.createElement("div",{className:"row row-blogpost"},l.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},l.a.createElement("h3",{className:"text-center"},o[0].title),l.a.createElement("p",{className:"blog-timestamp text-muted text-center"},N()(o[0].created).local().format("MMMM D, YYYY [at] h:mm a")),l.a.createElement("br",null),l.a.createElement("pre",null,o[0].content),l.a.createElement("div",{className:"row text-muted flex-row-reverse"},l.a.createElement("span",{className:"pointer blog-reaction",onClick:function(e){r(e,"love",o[0].id)}},l.a.createElement("i",{className:"far fa-heart"}),l.a.createElement("span",{className:"small blogs-reaction-count"},o[0].love)),l.a.createElement("span",{className:"pointer blog-reaction",onClick:function(e){r(e,"dislike",o[0].id)}},l.a.createElement("i",{className:"far fa-thumbs-down"}),l.a.createElement("span",{className:"small blogs-reaction-count"},o[0].dislike)),l.a.createElement("span",{className:"pointer blog-reaction",onClick:function(e){r(e,"like",o[0].id)}},l.a.createElement("i",{className:"far fa-thumbs-up"}),l.a.createElement("span",{className:"small blogs-reaction-count"},o[0].like))))))),l.a.createElement(w,null)):l.a.createElement(l.a.Fragment,null,l.a.createElement(f,null),l.a.createElement("div",{className:"component"},l.a.createElement("span",{className:"loader text-primary"},"Getting lost down a rabbit hole on Wikipedia...")),l.a.createElement(w,null))},O=a(16),j=a(10),S=a(18),x=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),l=a[0],o=a[1];function c(){return(c=Object(v.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,o(n[0]);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){c.apply(this,arguments)}()}),[e]),l};var T=function(e){var t=e.match.params.id,a=x("https://www.moogleapi.com/api/v1/blogs/"+t),o=Object(n.useState)(!1),c=Object(s.a)(o,2),r=c[0],m=c[1],u=Object(n.useState)(!1),p=Object(s.a)(u,2),d=p[0],g=p[1],E=function(){return g(!1)},b=Object(i.f)();return a?l.a.createElement(l.a.Fragment,null,l.a.createElement(f,null),l.a.createElement("div",{className:"component"},l.a.createElement("div",{className:"container top-margin"},l.a.createElement(j.a,Object.assign({show:d,onHide:E},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),l.a.createElement(j.a.Header,null,l.a.createElement(j.a.Title,null,"Test Account")),l.a.createElement(j.a.Body,null,l.a.createElement("p",null,"Your account doesn't have access to make changes.")),l.a.createElement(j.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:E},"Close"))),l.a.createElement("div",{className:"overlay",style:{display:r?"block":"none"}},l.a.createElement("span",{className:"loader text-primary"},"Waiting for my coffee to cool down ",l.a.createElement("i",{className:"fas fa-mug-hot"})," ...")),l.a.createElement("form",{name:"blog-form",id:"blog-form",encType:"multipart/form-data",method:"post"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-12"},l.a.createElement("div",{className:"input-group input-group-override floating-label"},l.a.createElement("div",{className:"input-group input-group-override floating-label"},l.a.createElement("input",{type:"text",className:"form-control floating-input",name:"title",defaultValue:a.title,placeholder:"Enter a blog title..."}),l.a.createElement("label",null,"blog title")),l.a.createElement("textarea",{className:"content-form-control floating-textarea",name:"content",defaultValue:a.content,placeholder:"Start writing some content..."}),l.a.createElement("label",null,"blog content")),l.a.createElement("div",{className:"button-container"},l.a.createElement("p",{title:"Submit Blog Edits",className:"btn btn-primary pointer",onClick:function(e){!function(e){Object(O.a)(JSON.parse(localStorage.accessToken)),e.preventDefault(),m(!0);var a=new FormData;a.append("id",t),a.append("title",document.querySelector('[name="title"]').value),a.append("content",document.querySelector('[name="content"]').value);var n=JSON.parse(localStorage.accessToken);fetch("https://www.moogleapi.com/api/v1/blogs/update/"+t,{method:"put",headers:{Authorization:"Bearer "+n},body:a}).then((function(e){200===e.status?(m(!1),b.push("/post/edit/"+t)):401===e.status||(403===e.status?(m(!1),g(!0),console.log("user cannot update blog")):(console.log("update failed"),console.log(e.errors)))}))}(e)}},"Submit"),l.a.createElement("p",{title:"Delete Blog",className:"btn btn-danger pointer",onClick:function(e){!function(e){Object(O.a)(JSON.parse(localStorage.accessToken)),e.preventDefault(),m(!0);var a=JSON.parse(localStorage.accessToken);fetch("https://www.moogleapi.com/api/v1/blogs/delete/"+t,{method:"delete",headers:{Authorization:"Bearer "+a}}).then((function(e){200===e.status?b.push("/"):401===e.status||(403===e.status?(m(!1),g(!0),console.log("user cannot delete blog")):(console.log("delete failed"),console.log(e.errors)))}))}(e)}},"Delete"))))))))),l.a.createElement(w,null)):l.a.createElement(l.a.Fragment,null,l.a.createElement(f,null),l.a.createElement("div",{className:"component"},l.a.createElement("span",{className:"loader text-primary"},"Going for a run...")),l.a.createElement(w,null))};var C=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),o=a[0],c=a[1],r=Object(n.useState)(!1),m=Object(s.a)(r,2),u=m[0],p=m[1],d=function(){return p(!1)},g=Object(i.f)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(f,null),l.a.createElement("div",{className:"component"},l.a.createElement("div",{className:"container top-margin"},l.a.createElement(j.a,Object.assign({show:u,onHide:d},e,{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),l.a.createElement(j.a.Header,null,l.a.createElement(j.a.Title,null,"Test Account")),l.a.createElement(j.a.Body,null,l.a.createElement("p",null,"Your account doesn't have access to make changes.")),l.a.createElement(j.a.Footer,null,l.a.createElement(S.a,{variant:"secondary",onClick:d},"Close"))),l.a.createElement("div",{className:"overlay",style:{display:o?"block":"none"}},l.a.createElement("span",{className:"loader text-primary"},"Brewing some coffee ",l.a.createElement("i",{className:"fas fa-coffee"})," ...")),l.a.createElement("form",{name:"character-form",id:"character-form",encType:"multipart/form-data",method:"put"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-12"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-12"},l.a.createElement("div",{className:"input-group input-group-override floating-label"},l.a.createElement("div",{className:"input-group input-group-override floating-label"},l.a.createElement("input",{type:"text",className:"form-control floating-input",name:"title",placeholder:"Enter a blog title..."}),l.a.createElement("label",null,"blog title")),l.a.createElement("textarea",{className:"content-form-control floating-textarea",name:"content",placeholder:"Start writing some content..."}),l.a.createElement("label",null,"blog content")),l.a.createElement("div",{className:"button-container"},l.a.createElement("p",{title:"Add Blog",className:"btn btn-primary pointer",onClick:function(e){!function(e){Object(O.a)(JSON.parse(localStorage.accessToken)),e.preventDefault(),c(!0);var t=new FormData;t.append("title",document.querySelector('[name="title"]').value),t.append("content",document.querySelector('[name="content"]').value),fetch("https://www.mooagleapi.com/api/v1/blogs/add",{method:"post",headers:{Authorization:"Bearer "+JSON.parse(localStorage.accessToken)},body:t}).then((function(e){if(200===e.status)return e.json().then((function(e){g.push("/")}));401===e.status?console.log("Still got a 401, bro."):403===e.status||405===e.status?(c(!1),p(!0),console.log("user cannot add blogs")):(console.log("add failed"),console.log(e.errors))}))}(e)}},"Submit"))))))))),l.a.createElement(w,null))};a(45),a(46);var J=function(e){var t=JSON.parse(localStorage.getItem("accessToken")),a=Object(n.useState)(t),o=Object(s.a)(a,2),c=o[0],u=o[1];return l.a.createElement(m.Provider,{value:{authToken:c,setAuthToken:function(e){localStorage.setItem("accessToken",JSON.stringify(e)),u(e)}}},l.a.createElement(r.b,{basename:""},l.a.createElement(i.b,{exact:!0,path:"/",component:y}),l.a.createElement(i.b,{exact:!0,path:"/login/",component:g}),l.a.createElement(i.b,{exact:!0,path:"/post/:id",component:k}),l.a.createElement(d,{exact:!0,path:"/add/",component:C}),l.a.createElement(d,{exact:!0,path:"/post/edit/:id/",component:T})))},A=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(l.a.createElement(r.a,null,l.a.createElement(J,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");A?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):B(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):B(t,e)}))}}()}},[[28,1,2]]]);
//# sourceMappingURL=main.ec56f00c.chunk.js.map